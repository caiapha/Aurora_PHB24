<?xml version="1.0" encoding="utf-8"?>
<elements>
  <info>
    <update version="1.0.0">
      <file name="warlock-fiend-2024.xml" url="https://raw.githubusercontent.com/caiapha/Aurora_PHB24/refs/heads/main/Players-Hanbook/warlock-fiend-2024.xml" />
    </update>
    <author url="https://marketplace.dndbeyond.com/core-rules/3709000">Wizards of the Coast</author>
  </info>

  <!-- ===================== WARLOCK SUBCLASS: FIEND (PHB 2024) ===================== -->
  <element name="Fiend Patron" type="Archetype" source="Player's Handbook (2024)" id="ID_WOTC_PHB24_WARLOCK_ARCHETYPE_FIEND">
    <supports>WarlockSubclass</supports>
    <description>
      <h1>Fiend Patron</h1>
      <p>Your pact is with a fiend from the Lower Planesâ€”ever hungry for souls and suffering.</p>

      <h3>Subclass Features</h3>
      <p>When you choose this patron at 3rd level, you gain the following features.</p>

      <div element="ID_WOTC_PHB24_WARLOCK_FIEND_FEATURE_FIEND_SPELLS" />
      <div element="ID_WOTC_PHB24_WARLOCK_FIEND_FEATURE_DARK_ONES_BLESSING" />
      <div element="ID_WOTC_PHB24_WARLOCK_FIEND_FEATURE_DARK_ONES_OWN_LUCK" />
      <div element="ID_WOTC_PHB24_WARLOCK_FIEND_FEATURE_FIENDISH_RESILIENCE" />
      <div element="ID_WOTC_PHB24_WARLOCK_FIEND_FEATURE_HURL_THROUGH_HELL" />
    </description>

    <sheet display="false" />
    <rules>
      <grant type="Archetype Feature" id="ID_WOTC_PHB24_WARLOCK_FIEND_FEATURE_FIEND_SPELLS"           level="3" />
      <grant type="Archetype Feature" id="ID_WOTC_PHB24_WARLOCK_FIEND_FEATURE_DARK_ONES_BLESSING"     level="3" />
      <grant type="Archetype Feature" id="ID_WOTC_PHB24_WARLOCK_FIEND_FEATURE_DARK_ONES_OWN_LUCK"     level="6" />
      <grant type="Archetype Feature" id="ID_WOTC_PHB24_WARLOCK_FIEND_FEATURE_FIENDISH_RESILIENCE"    level="10" />
      <grant type="Archetype Feature" id="ID_WOTC_PHB24_WARLOCK_FIEND_FEATURE_HURL_THROUGH_HELL"      level="14" />
    </rules>
  </element>

  <!-- ===== Fiend Spells (always prepared) ===== -->
  <element name="Fiend Spells" type="Archetype Feature" source="Player's Handbook (2024)" id="ID_WOTC_PHB24_WARLOCK_FIEND_FEATURE_FIEND_SPELLS">
    <description>
      <p>The magic of your patron ensures you always have certain spells prepared. When you reach a Warlock level specified in the Fiend Spells table, you thereafter always have the listed spells prepared. These spells do not count against the number of spells you can prepare.</p>
      <h5 class="caption">FIEND SPELLS</h5>
      <table>
        <thead><tr><th>Warlock Level</th><th>Spells</th></tr></thead>
        <tbody>
          <tr><td>3</td><td>Burning Hands, Command, Scorching Ray, Suggestion</td></tr>
          <tr><td>5</td><td>Fireball, Stinking Cloud</td></tr>
          <tr><td>7</td><td>Fire Shield, Wall of Fire</td></tr>
          <tr><td>9</td><td>Geas, Insect Plague</td></tr>
        </tbody>
      </table>
    </description>
    <sheet display="false" />
    <rules>
      <grant type="Spell" id="ID_PHB24_SPELL_BURNING_HANDS" prepared="true" spellcasting="warlock" level="3" />
      <grant type="Spell" id="ID_PHB24_SPELL_COMMAND" prepared="true" spellcasting="warlock" level="3" />
      <grant type="Spell" id="ID_PHB24_SPELL_SCORCHING_RAY" prepared="true" spellcasting="warlock" level="3" />
      <grant type="Spell" id="ID_PHB24_SPELL_SUGGESTION" prepared="true" spellcasting="warlock" level="3" />
      <grant type="Spell" id="ID_PHB24_SPELL_FIREBALL" prepared="true" spellcasting="warlock" level="5" />
      <grant type="Spell" id="ID_PHB24_SPELL_STINKING_CLOUD" prepared="true" spellcasting="warlock" level="5" />      
      <grant type="Spell" id="ID_PHB24_SPELL_FIRE_SHIELD" prepared="true" spellcasting="warlock" level="7" />
      <grant type="Spell" id="ID_PHB24_SPELL_WALL_OF_FIRE" prepared="true" spellcasting="warlock" level="7" />
      <grant type="Spell" id="ID_PHB24_SPELL_GEAS" prepared="true" spellcasting="warlock" level="9" />
      <grant type="Spell" id="ID_PHB24_SPELL_INSECT_PLAGUE" prepared="true" spellcasting="warlock" level="9" />
    </rules>
  </element>

  <!-- ===== Level 3: Dark One's Blessing ===== -->
  <element name="Dark One's Blessing" type="Archetype Feature" source="Player's Handbook (2024)" id="ID_WOTC_PHB24_WARLOCK_FIEND_FEATURE_DARK_ONES_BLESSING">
    <description>
      <p>When you reduce a hostile creature to 0 Hit Points, you gain Temporary Hit Points equal to your Warlock level + your Charisma modifier (minimum of 1).</p>
    </description>
    <sheet>
      <description>When you or somone else within 10ft. reduce a creature to 0 HP, you gain {{dark one blessing:hp}} Temporary HP.</description>
    </sheet>
    <rules>
        <stat name="dark one blessing:hp:calc" value="level:warlock" />
        <stat name="dark one blessing:hp:calc" value="charisma:modifier" />
        <stat name="dark one blessing:hp" value="1" bonus="base" />
        <stat name="dark one blessing:hp" value="dark one blessing:hp:calc" bonus="base" />
    </rules>
  </element>

  <!-- ===== Level 6: Dark One's Own Luck ===== -->
  <element name="Dark One's Own Luck" type="Archetype Feature" source="Player's Handbook (2024)" id="ID_WOTC_PHB24_WARLOCK_FIEND_FEATURE_DARK_ONES_OWN_LUCK">
    <description>
      <p>You can call on your fiendish patron to alter fate in your favor. When you make an ability check or a saving throw, you can use this feature to add 1d10 to your roll. You can do so after seeing the roll but before any of the roll's effects occur.</p>
      <p>You can use this feature a number of times equal to your Charisma modifier (minimum of once), but you can use it no more than once per roll. You regain all expended uses when you finish a Long Rest.</p>
    </description>
    <sheet usage="{{dark one luck:usage}}/Long Rest">
      <description>After you roll an Ability Check or Saving Throw, you can add 1d10 to the roll, but before any effects applies.</description>
    </sheet>
    <rules>
        <stat name="dark one luck:usage" value="1" bonus="base" />
        <stat name="dark one luck:usage" value="charisma:modifier" bonus="base" />
    </rules>
  </element>

  <!-- ===== Level 10: Fiendish Resilience ===== -->
  <element name="Fiendish Resilience" type="Archetype Feature" source="Player's Handbook (2024)" id="ID_WOTC_PHB24_WARLOCK_FIEND_FEATURE_FIENDISH_RESILIENCE">
    <description>
      <p>Choose one damage type, other than Force, whenever you finish a Short or Long Rest. You have Resistance to that damage type until you choose a different one with this feature.</p>
    </description>
    <sheet>
      <description>After any Rest, choose a damage type other than Force; you have Resistance to it until your change it.</description>
    </sheet>
  </element>

  <!-- ===== Level 14: Hurl Through Hell ===== -->
  <element name="Hurl Through Hell" type="Archetype Feature" source="Player's Handbook (2024)" id="ID_WOTC_PHB24_WARLOCK_FIEND_FEATURE_HURL_THROUGH_HELL">
    <description>
      <p>Once per turn when you hit a creature with an attack roll, you can try to instantly transport the target through the Lower Planes. The target must succeed on a Charisma saving throw against your spell save DC, or the target disappears and hurtles through a nightmare landscape. The target takes 8d10 Psychic damage if it isn't a Fiend, and it has the Incapacitated condition until the end of your next turn, when it returns to the space it previously occupied or the nearest unoccupied space.</p>
      <p>Once you use this feature, you can't use it again until you finish a Long Rest unless you expend a Pact Magic spell slot (no action required) to restore your use of it.</p>
    </description>
    <sheet usage="1/Long Rest">
      <description>When you hit a creature, it must succeed on a CHA Saving Throw DC {{warlock:spellcasting:dc}} or be banished in a fiendish plane. If  it is not a Fiend, it takes 8d10 Psychic damage and is Incapacitated until the end of your next turn, when it returns. You can restore a use expending a Pact Magic spell slot.</description>
    </sheet>
  </element>
</elements>



